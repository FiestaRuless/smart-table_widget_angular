<div class="aui-smart-table">
  <div class="aui-smart-table__filters aui-smart-table__filters--visible">
    <div class="aui-smart-table__filters--right">
      <div class="aui-smart-table__button u-margin-left-xs a-input" *ngIf="totalResults > 0">
        <div class="a-input__wrapper">
          <button class="a-button-outline a-button-export has-icon"
                  (click)="exportToExcel()"
                  [attr.aria-label]="options.translations?.export || 'Exporteer'"
                  [title]="options.translations?.export || 'Exporteer'">
            <span class="fa fa-file-o"></span>
          </button>
        </div>
      </div>

      <div class="aui-smart-table__button u-margin-left-xs a-input" *ngIf="totalResults > 0">
        <div class="a-input__wrapper">
          <div auiFlyout size="small" align="right">
            <button class="a-button-outline has-icon"
                    [attr.aria-label]="options.translations?.openColumnSelector || 'Toon/verberg kolommen'"
                    [title]="options.translations?.openColumnSelector || 'Toon/verberg kolommen'" auiFlyoutAction>
              <span class="fa fa-columns"></span>
            </button>

            <div auiFlyoutZone>
              <div class="u-margin-xs">
                <ul class="a-list a-list--reset aui-smart-table__column-checklist u-margin-bottom-xs">
                  <li class="a-list__item"
                      *ngFor="let column of selectableColumns; index as i">
                    <div class="a-input__checkbox">
                      <input type="checkbox" id="{{ 'checkbox--' + i + '--' + column.id }}"
                             name="{{ 'checkbox--' + i + '--' + column.id }}" [checked]="!column.hidden"
                             (change)="toggleSelectedColumn(column.value)">
                      <label for="{{ 'checkbox--' + i + '--' + column.id }}">{{ column.label }}</label>
                    </div>
                  </li>
                </ul>
                <button class="a-button a-button--small a-button--block" (click)="onColumnsSelected()">
                  {{ options.translations?.apply || 'Toepassen'}}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="aui-smart-table__filters--left">
      <aui-table-input-filter class="aui-smart-table__filter"
                              *ngIf="genericFilter" [filter]="genericFilter" (update)="onFilter($event)">
      </aui-table-input-filter>

      <ng-container *ngFor="let filter of visibleFilters" [ngSwitch]="filter.type">
        <ng-container *ngSwitchCase="'select'">
          <aui-table-select-filter class="aui-smart-table__filter" [filter]="filter" (update)="onFilter($event)">
          </aui-table-select-filter>
        </ng-container>

        <ng-container *ngSwitchCase="'input'">
          <aui-table-input-filter class="aui-smart-table__filter" [filter]="filter" (update)="onFilter($event)">
          </aui-table-input-filter>
        </ng-container>

        <ng-container *ngSwitchCase="'datepicker'">
          <aui-table-datepicker-filter class="aui-smart-table__filter" [filter]="filter" (update)="onFilter($event)">
          </aui-table-datepicker-filter>
        </ng-container>
      </ng-container>

      <div class="aui-smart-table__button a-input" *ngIf="optionalFilters.length">
        <div class="a-input__wrapper">
          <button class="a-button-outline has-icon-right a-toggle-filters" (click)="toggleOptionalFilters()"
                  [attr.aria-controls]="'toggle-' + instanceId" [attr.aria-expanded]="optionalFiltersVisible">
            {{ options.translations?.moreFilters || 'Extra filters'}} <span class="fa fa-angle-down"
                                                                            [ngClass]="{'is-toggled': optionalFiltersVisible }"></span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="aui-smart-table__filters aui-smart-table__filters--toggle"
       [ngClass]="{'is-visible': optionalFiltersVisible}" id="toggle-{{ instanceId }}">
    <ng-container *ngFor="let filter of optionalFilters" [ngSwitch]="filter.type">
      <ng-container *ngSwitchCase="'select'">
        <aui-table-select-filter class="aui-smart-table__filter" [filter]="filter" [optional]="true"
                                 (update)="onFilter($event)"></aui-table-select-filter>
      </ng-container>

      <ng-container *ngSwitchCase="'input'">
        <aui-table-input-filter class="aui-smart-table__filter" [filter]="filter" [optional]="true"
                                (update)="onFilter($event)"></aui-table-input-filter>
      </ng-container>

      <ng-container *ngSwitchCase="'datepicker'">
        <aui-table-datepicker-filter class="aui-smart-table__filter" [filter]="filter" [optional]="true"
                                     (update)="onFilter($event)"></aui-table-datepicker-filter>
      </ng-container>
    </ng-container>
  </div>

  <div class="aui-smart-table__wrapper">
    <div class="u-margin-top u-margin-bottom">
      <aui-table [loadDataMessage]="options.loadDataMessage" [noDataMessage]="options.noDataMessage"
                 [loading]="rowsLoading" [columns]="columns" [rows]="rows" [hasClickAction]="true"
                 [activeSorting]="orderBy"
                 (orderBy)="onOrderBy($event)" (rowClicked)="onClickRow($event)"></aui-table>
    </div>

    <div class="aui-smart-table__actions" *ngIf="hasRows">
      <div class="aui-smart-table__actions--left">
        <aui-items-per-page
          class="aui-smart-table__items-per-page"
          [selectOptions]="options.pageSizeOptions"
          [amountPerPage]="pageSize"
          (returnAmount)="onPageSizeChanged($event)">
        </aui-items-per-page>
        <aui-item-counter
          *ngIf="totalResults > 0"
          class="aui-smart-table__item-counter u-margin-top-xs u-margin-bottom-xs"
          [currentPage]="curPage"
          [totalAmount]="totalResults"
          [amountPerPage]="pageSize">
        </aui-item-counter>
      </div>

      <div class="aui-smart-table__actions--right" *ngIf="totalResults > 0">
        <aui-pagination
          class="u-hide-on-mobile-devices"
          display="numbers"
          [itemsPerPage]="pageSize"
          [totalValues]="totalResults"
          [currentPage]="curPage"
          (update)="onPageChanged($event)">
        </aui-pagination>
        <aui-pagination
          class="u-show-on-mobile-devices"
          display="text"
          aria-hidden="true"
          ariaNavigationLabel="Mobiele paginering"
          [itemsPerPage]="pageSize"
          [totalValues]="totalResults"
          [currentPage]="curPage"
          (update)="onPageChanged($event)">
        </aui-pagination>
      </div>
    </div>

    <div class="aui-smart-table__loading-overlay" *ngIf="pageChanging">
      <div class="a-spinner a-spinner--lg u-margin-bottom-xx" role="alert" aria-busy="true"></div>
    </div>
  </div>
</div>
